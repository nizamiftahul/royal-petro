{"version":3,"sources":["../../../src/utils/offsets.ts"],"sourcesContent":["import type { XYCoord } from 'dnd-core'\nimport { isTouchEvent } from './predicates.js'\n\nconst ELEMENT_NODE = 1\n\nexport function getNodeClientOffset(node: Element): XYCoord | undefined {\n\tconst el = node.nodeType === ELEMENT_NODE ? node : node.parentElement\n\tif (!el) {\n\t\treturn undefined\n\t}\n\tconst { top, left } = el.getBoundingClientRect()\n\treturn { x: left, y: top }\n}\n\nexport function getEventClientTouchOffset(\n\te: TouchEvent,\n\tlastTargetTouchFallback?: Touch,\n): XYCoord | undefined {\n\tif (e.targetTouches.length === 1) {\n\t\treturn getEventClientOffset(e.targetTouches[0] as Touch)\n\t} else if (lastTargetTouchFallback && e.touches.length === 1) {\n\t\tif ((e.touches[0] as Touch).target === lastTargetTouchFallback.target) {\n\t\t\treturn getEventClientOffset(e.touches[0] as Touch)\n\t\t}\n\t}\n\treturn\n}\n\nexport function getEventClientOffset(\n\te: TouchEvent | Touch | MouseEvent,\n\tlastTargetTouchFallback?: Touch,\n): XYCoord | undefined {\n\tif (isTouchEvent(e)) {\n\t\treturn getEventClientTouchOffset(e, lastTargetTouchFallback)\n\t} else {\n\t\treturn {\n\t\t\tx: e.clientX,\n\t\t\ty: e.clientY,\n\t\t}\n\t}\n}\n"],"names":["getNodeClientOffset","getEventClientTouchOffset","getEventClientOffset","ELEMENT_NODE","node","el","nodeType","parentElement","undefined","top","left","getBoundingClientRect","x","y","e","lastTargetTouchFallback","targetTouches","length","touches","target","isTouchEvent","clientX","clientY"],"mappings":";;;;QAKgBA,mBAAmB,GAAnBA,mBAAmB;QASnBC,yBAAyB,GAAzBA,yBAAyB;QAczBC,oBAAoB,GAApBA,oBAAoB;AA3BP,GAAiB,CAAjB,aAAiB;AAE9C,KAAK,CAACC,YAAY,GAAG,CAAC;SAENH,mBAAmB,CAACI,IAAa,EAAuB,CAAC;IACxE,KAAK,CAACC,EAAE,GAAGD,IAAI,CAACE,QAAQ,KAAKH,YAAY,GAAGC,IAAI,GAAGA,IAAI,CAACG,aAAa;IACrE,EAAE,GAAGF,EAAE,EAAE,CAAC;QACT,MAAM,CAACG,SAAS;IACjB,CAAC;IACD,KAAK,CAAC,CAAC,CAACC,GAAG,GAAEC,IAAI,EAAC,CAAC,GAAGL,EAAE,CAACM,qBAAqB;IAC9C,MAAM,CAAC,CAAC;QAACC,CAAC,EAAEF,IAAI;QAAEG,CAAC,EAAEJ,GAAG;IAAC,CAAC;AAC3B,CAAC;SAEeR,yBAAyB,CACxCa,CAAa,EACbC,uBAA+B,EACT,CAAC;IACvB,EAAE,EAAED,CAAC,CAACE,aAAa,CAACC,MAAM,KAAK,CAAC,EAAE,CAAC;QAClC,MAAM,CAACf,oBAAoB,CAACY,CAAC,CAACE,aAAa,CAAC,CAAC;IAC9C,CAAC,MAAM,EAAE,EAAED,uBAAuB,IAAID,CAAC,CAACI,OAAO,CAACD,MAAM,KAAK,CAAC,EAAE,CAAC;QAC9D,EAAE,EAAGH,CAAC,CAACI,OAAO,CAAC,CAAC,EAAYC,MAAM,KAAKJ,uBAAuB,CAACI,MAAM,EAAE,CAAC;YACvE,MAAM,CAACjB,oBAAoB,CAACY,CAAC,CAACI,OAAO,CAAC,CAAC;QACxC,CAAC;IACF,CAAC;IACD,MAAM;AACP,CAAC;SAEehB,oBAAoB,CACnCY,CAAkC,EAClCC,uBAA+B,EACT,CAAC;IACvB,EAAE,MAAEK,aAAY,eAACN,CAAC,GAAG,CAAC;QACrB,MAAM,CAACb,yBAAyB,CAACa,CAAC,EAAEC,uBAAuB;IAC5D,CAAC,MAAM,CAAC;QACP,MAAM,CAAC,CAAC;YACPH,CAAC,EAAEE,CAAC,CAACO,OAAO;YACZR,CAAC,EAAEC,CAAC,CAACQ,OAAO;QACb,CAAC;IACF,CAAC;AACF,CAAC"}